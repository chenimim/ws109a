<!DOCTYPE html>
<html>
    <style>
        #ss {
  background-image:url("im/3.jpg");
  background-size: 900px 98px;
  color: Azure;
  padding: 30px;
  text-align: center;
  font-family:標楷體;
} 


    </style>
<head>
    <body style="background-color:#FFFAF0;"></body>
    <meta charset="UTF-8">
    <title>東買西買到處亂買</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    
    
</head>
<body>
    <header>
        <h1 id="ss">東買西買到處亂買商城</h1>
        <marquee style="font-size: 20px;">♣歡迎光臨東買西買到處亂買商城♣</marquee>
    </header>

    <div style="display: flex; margin:80px 50px;">
        <!-- Sidebar -->
        <aside style="width: 10%;">
            <ul class="sidebar" style="background-color: rgba(50, 56, 56, 0.89);">
                <li><a href="首頁.HTML">首頁</a></li>
                    <li><a href="購物車.html">購物車</a></li>
                    <li><a href="註冊介面.html">註冊</a></li>
                    <li><a href="登入介面.html">登入</a></li>
                    <li><a href="">登出</a></li>
                    
            </ul>
        </aside>

        <!-- Main -->
        <main style="
            /* Take the remaining width */
            flex: 2;
            /* Make it scrollable */
            padding-left: 80px;
        ">

                <div class="row">         
                    <div class="card" style="width: 15rem; margin: 10px;" >
                        <img src="im/7.jpg" class="card-img-top" alt="..." style=" height: 250px;">                    
                        <div class="card-body" style="width: 100%;">
                            <h5 class="card-title" id="Name-0">香菇大戰毒蛇</h5>
                            <p class="card-text" id="Price-0">200</p>
                            <div class="form-group">
                                <input type="number" class="form-control" id="Amount-0" min="1" placeholder="數量"  >
                            </div>
                            <a href="#" class="btn btn-primary" onclick="addItemToCart(0)">加入</a>
                        </div>
                    </div>
                    <div class="card" style="width: 15rem; margin: 9px;">
                        <img src="im/8.jpg" class="card-img-top" alt="..." style="height: 250px;">
                        <div class="card-body">
                            <h5 class="card-title" id="Name-1">益智小遊戲</h5>
                            <p class="card-text" id="Price-1">250</p>
                            <div class="form-group">
                                <input type="number" class="form-control" id="Amount-1" min="1" placeholder="數量">
                            </div>
                            <a href="#" class="btn btn-primary" onclick="addItemToCart(1)">加入</a>
                        </div>
                    </div>
                    <div class="card" style="width: 15rem; margin:10px">
                        <img src="im/9.jpg" class="card-img-top" alt="..." style=" height: 250px;">
                        <div class="card-body">
                            <h5 class="card-title" id="Name-2">異世界大亂鬥</h5>
                            <p class="card-text" id="Price-2">350</p>
                            <div class="form-group">
                                <input type="number" class="form-control"  id="Amount-2" min="1" placeholder="數量">
                        </div>
                        <a href="#" class="btn btn-primary" onclick="addItemToCart(2)">加入</a>
                        </div>
                    </div>
                </div> 
                   


        </main>
    </div>
    
<script>
    // 新增紀錄商品排序的 total
    var total = localStorage.length
    let b = []
    // 新增商品到購物車
    function addItemToCart(pId){ 
        // 驗證是否有登入
        let u = document.getElementById("user")
        if(u != null){
            var user = u.innerHTML
            var pName = document.getElementById("Name-" + pId).textContent
            var pPrice = document.getElementById("Price-" + pId).textContent
            var pAmount = document.getElementById("Amount-" + pId).value
            
            // 驗證商品數量的值為正整數
            var r = /^[0-9]*[1-9][0-9]*$/

            if (r.test(pAmount)){

                let products = {
                    Id : total,
                    Name : pName,
                    Price : pPrice,
                    Amount : pAmount
                }
                
                localStorage.setItem('p-' + total , JSON.stringify(products)) // 轉換為 JSON 格式

                let a = localStorage.getItem('p-' + total)
                b.push(a)
                console.log(b.length)

                total ++ 
            }
            else {
                alert("請填入有效數量")
            }
        }
        else {
            alert("請先登入")
        }
    }




</script>
</body>
</html>
